<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>现实版躲猫猫</title>
    
    <!-- CSS 文件 -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    
    <!-- 外部库 -->
    <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script>
    <script src="https://webapi.amap.com/maps?v=2.0&key=ea4fdf391df59379e2e64cba9fabcb51"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-search"></i> 现实版躲猫猫</h1>
            <p class="subtitle">基于地理位置的多人在线游戏</p>
        </header>
        
        <!-- 初始界面 - 创建/加入房间 -->
        <div id="setupPhase" class="game-phase active">
            <div class="form-container">
                <h2><i class="fas fa-door-open"></i> 创建或加入游戏</h2>
                <div class="form-group">
                    <label for="playerName"><i class="fas fa-user"></i> 你的昵称</label>
                    <input type="text" id="playerName" placeholder="输入你的昵称" maxlength="15">
                </div>
                
                <div class="form-group">
                    <label for="roomAction"><i class="fas fa-cog"></i> 选择操作</label>
                    <select id="roomAction">
                        <option value="create">创建房间</option>
                        <option value="join">加入房间</option>
                    </select>
                </div>
                
                <div class="form-group" id="roomIdGroup">
                    <label for="roomId"><i class="fas fa-key"></i> 房间号</label>
                    <input type="text" id="roomId" placeholder="输入房间号">
                </div>
                
                <div class="form-group" id="gameConfig" style="display: none;">
                    <h3><i class="fas fa-sliders-h"></i> 游戏配置</h3>
                    <div class="config-grid">
                        <div>
                            <label for="hideTime"><i class="fas fa-clock"></i> 躲藏时间（分钟）</label>
                            <input type="number" id="hideTime" value="5" min="1" max="30">
                        </div>
                        <div>
                            <label for="locationInterval"><i class="fas fa-sync-alt"></i> 扫描冷却（分钟）</label>
                            <input type="number" id="locationInterval" value="10" min="5" max="30">
                        </div>
                        <div>
                            <label for="locationDuration"><i class="fas fa-eye"></i> 扫描时间（秒）</label>
                            <input type="number" id="locationDuration" value="60" min="10" max="120">
                        </div>
                        <div>
                            <label for="scanCount"><i class="fas fa-bullseye"></i> 扫描次数</label>
                            <input type="number" id="scanCount" value="3" min="1" max="10">
                        </div>
                    </div>
                </div>
                
                <button id="startBtn" class="btn-primary"><i class="fas fa-play"></i> 开始</button>
            </div>
        </div>
        
        <!-- 房间等待界面 -->
        <div id="lobbyPhase" class="game-phase">
            <div class="form-container">
                <h2><i class="fas fa-users"></i> 房间: <span id="displayRoomId"></span></h2>
                <p><i class="fas fa-crown"></i> 房主: <span id="hostName"></span></p>
                
                <div class="players-list">
                    <h3><i class="fas fa-list"></i> 玩家列表</h3>
                    <div id="playersContainer"></div>
                </div>
                
                <div id="hostControls">
                    <div class="host-controls">
                        <button id="randomCatBtn" class="btn-secondary"><i class="fas fa-random"></i> 随机指定猫</button>
                        <button id="startGameBtn" class="btn-primary" disabled><i class="fas fa-gamepad"></i> 开始游戏</button>
                    </div>
                </div>
                
                <div id="playerControls">
                    <div class="player-controls">
                        <button id="readyBtn" class="btn-secondary"><i class="fas fa-check"></i> 准备</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 游戏进行界面 -->
        <div id="gamePhase" class="game-phase">
            <div class="game-area">
                <div class="game-info">
                    <div class="info-card">
                        <h3><i class="fas fa-info-circle"></i> 游戏状态</h3>
                        <p id="gameStateText">等待开始</p>
                    </div>
                    <div class="info-card">
                        <h3><i class="fas fa-hourglass-half"></i> 剩余时间</h3>
                        <p id="timer">00:00</p>
                    </div>
                    <div class="info-card">
                        <h3><i class="fas fa-user-tag"></i> 你的角色</h3>
                        <p id="playerRole">未知</p>
                    </div>
                    <div class="info-card">
                        <h3><i class="fas fa-bullseye"></i> 扫描次数</h3>
                        <p id="scanCountDisplay">0/0</p>
                    </div>
                </div>
                
                <div id="statusMessage" class="status-message"></div>
                
                <div id="gameMap" style="display: none;"></div>
                
                <div class="controls">
                    <button id="caughtBtn" class="btn-caught"><i class="fas fa-hand-paper"></i> 我被抓住了</button>
                    <button id="leaveGameBtn" class="btn-secondary"><i class="fas fa-sign-out-alt"></i> 离开游戏</button>
                </div>
                
                <div class="players-list">
                    <h3><i class="fas fa-user-friends"></i> 玩家状态</h3>
                    <div id="gamePlayersContainer"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript 文件 -->
    <script src="js/utils.js"></script>
    <script src="js/gameState.js"></script>
    <script src="js/peerConnection.js"></script>
    <script src="js/mapManager.js"></script>
    <script src="js/uiManager.js"></script>
    <script src="js/app.js"></script>
</body>
</html>